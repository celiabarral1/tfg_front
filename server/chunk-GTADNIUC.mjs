import './polyfills.server.mjs';
import{A as Ne,Ma as ce,h as $,k as E,l as H,qa as Me,z as Ce}from"./chunk-ZVTFXWI3.mjs";import{a as It,b as Ot,e as wn,g as zn}from"./chunk-5XUXGTUW.mjs";var bt=wn((Si,Ae)=>{"use strict";(function(e,i,o,r){"use strict";var a=["","webkit","Moz","MS","ms","o"],u=i.createElement("div"),f="function",h=Math.round,m=Math.abs,g=Date.now;function p(t,n,s){return setTimeout(De(t,s),n)}function _(t,n,s){return Array.isArray(t)?(T(t,s[n],s),!0):!1}function T(t,n,s){var l;if(t)if(t.forEach)t.forEach(n,s);else if(t.length!==r)for(l=0;l<t.length;)n.call(s,t[l],l,t),l++;else for(l in t)t.hasOwnProperty(l)&&n.call(s,t[l],l,t)}function D(t,n,s){var l="DEPRECATED METHOD: "+n+`
`+s+` AT 
`;return function(){var c=new Error("get-stack-trace"),d=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",v=e.console&&(e.console.warn||e.console.log);return v&&v.call(e.console,l,d),t.apply(this,arguments)}}var N;typeof Object.assign!="function"?N=function(n){if(n===r||n===null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),l=1;l<arguments.length;l++){var c=arguments[l];if(c!==r&&c!==null)for(var d in c)c.hasOwnProperty(d)&&(s[d]=c[d])}return s}:N=Object.assign;var j=D(function(n,s,l){for(var c=Object.keys(s),d=0;d<c.length;)(!l||l&&n[c[d]]===r)&&(n[c[d]]=s[c[d]]),d++;return n},"extend","Use `assign`."),te=D(function(n,s){return j(n,s,!0)},"merge","Use `assign`.");function M(t,n,s){var l=n.prototype,c;c=t.prototype=Object.create(l),c.constructor=t,c._super=l,s&&N(c,s)}function De(t,n){return function(){return t.apply(n,arguments)}}function we(t,n){return typeof t==f?t.apply(n&&n[0]||r,n):t}function tt(t,n){return t===r?n:t}function de(t,n,s){T(pe(n),function(l){t.addEventListener(l,s,!1)})}function me(t,n,s){T(pe(n),function(l){t.removeEventListener(l,s,!1)})}function nt(t,n){for(;t;){if(t==n)return!0;t=t.parentNode}return!1}function Z(t,n){return t.indexOf(n)>-1}function pe(t){return t.trim().split(/\s+/g)}function K(t,n,s){if(t.indexOf&&!s)return t.indexOf(n);for(var l=0;l<t.length;){if(s&&t[l][s]==n||!s&&t[l]===n)return l;l++}return-1}function ge(t){return Array.prototype.slice.call(t,0)}function it(t,n,s){for(var l=[],c=[],d=0;d<t.length;){var v=n?t[d][n]:t[d];K(c,v)<0&&l.push(t[d]),c[d]=v,d++}return s&&(n?l=l.sort(function(S,O){return S[n]>O[n]}):l=l.sort()),l}function ve(t,n){for(var s,l,c=n[0].toUpperCase()+n.slice(1),d=0;d<a.length;){if(s=a[d],l=s?s+c:n,l in t)return l;d++}return r}var $t=1;function Jt(){return $t++}function ot(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var en=/mobile|tablet|ip(ad|hone|od)|android/i,st="ontouchstart"in e,tn=ve(e,"PointerEvent")!==r,nn=st&&en.test(navigator.userAgent),ne="touch",on="pen",ze="mouse",sn="kinect",rn=25,I=1,W=2,P=4,b=8,Te=1,ie=2,oe=4,se=8,re=16,z=ie|oe,q=se|re,rt=z|q,at=["x","y"],Ee=["clientX","clientY"];function A(t,n){var s=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(l){we(t.options.enable,[t])&&s.handler(l)},this.init()}A.prototype={handler:function(){},init:function(){this.evEl&&de(this.element,this.evEl,this.domHandler),this.evTarget&&de(this.target,this.evTarget,this.domHandler),this.evWin&&de(ot(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&me(this.element,this.evEl,this.domHandler),this.evTarget&&me(this.target,this.evTarget,this.domHandler),this.evWin&&me(ot(this.element),this.evWin,this.domHandler)}};function an(t){var n,s=t.options.inputClass;return s?n=s:tn?n=Ue:nn?n=Pe:st?n=He:n=_e,new n(t,ln)}function ln(t,n,s){var l=s.pointers.length,c=s.changedPointers.length,d=n&I&&l-c===0,v=n&(P|b)&&l-c===0;s.isFirst=!!d,s.isFinal=!!v,d&&(t.session={}),s.eventType=n,un(t,s),t.emit("hammer.input",s),t.recognize(s),t.session.prevInput=s}function un(t,n){var s=t.session,l=n.pointers,c=l.length;s.firstInput||(s.firstInput=lt(n)),c>1&&!s.firstMultiple?s.firstMultiple=lt(n):c===1&&(s.firstMultiple=!1);var d=s.firstInput,v=s.firstMultiple,x=v?v.center:d.center,S=n.center=ut(l);n.timeStamp=g(),n.deltaTime=n.timeStamp-d.timeStamp,n.angle=Le(x,S),n.distance=ye(x,S),cn(s,n),n.offsetDirection=ft(n.deltaX,n.deltaY);var O=ct(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=O.x,n.overallVelocityY=O.y,n.overallVelocity=m(O.x)>m(O.y)?O.x:O.y,n.scale=v?dn(v.pointers,l):1,n.rotation=v?hn(v.pointers,l):0,n.maxPointers=s.prevInput?n.pointers.length>s.prevInput.maxPointers?n.pointers.length:s.prevInput.maxPointers:n.pointers.length,fn(s,n);var U=t.element;nt(n.srcEvent.target,U)&&(U=n.srcEvent.target),n.target=U}function cn(t,n){var s=n.center,l=t.offsetDelta||{},c=t.prevDelta||{},d=t.prevInput||{};(n.eventType===I||d.eventType===P)&&(c=t.prevDelta={x:d.deltaX||0,y:d.deltaY||0},l=t.offsetDelta={x:s.x,y:s.y}),n.deltaX=c.x+(s.x-l.x),n.deltaY=c.y+(s.y-l.y)}function fn(t,n){var s=t.lastInterval||n,l=n.timeStamp-s.timeStamp,c,d,v,x;if(n.eventType!=b&&(l>rn||s.velocity===r)){var S=n.deltaX-s.deltaX,O=n.deltaY-s.deltaY,U=ct(l,S,O);d=U.x,v=U.y,c=m(U.x)>m(U.y)?U.x:U.y,x=ft(S,O),t.lastInterval=n}else c=s.velocity,d=s.velocityX,v=s.velocityY,x=s.direction;n.velocity=c,n.velocityX=d,n.velocityY=v,n.direction=x}function lt(t){for(var n=[],s=0;s<t.pointers.length;)n[s]={clientX:h(t.pointers[s].clientX),clientY:h(t.pointers[s].clientY)},s++;return{timeStamp:g(),pointers:n,center:ut(n),deltaX:t.deltaX,deltaY:t.deltaY}}function ut(t){var n=t.length;if(n===1)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var s=0,l=0,c=0;c<n;)s+=t[c].clientX,l+=t[c].clientY,c++;return{x:h(s/n),y:h(l/n)}}function ct(t,n,s){return{x:n/t||0,y:s/t||0}}function ft(t,n){return t===n?Te:m(t)>=m(n)?t<0?ie:oe:n<0?se:re}function ye(t,n,s){s||(s=at);var l=n[s[0]]-t[s[0]],c=n[s[1]]-t[s[1]];return Math.sqrt(l*l+c*c)}function Le(t,n,s){s||(s=at);var l=n[s[0]]-t[s[0]],c=n[s[1]]-t[s[1]];return Math.atan2(c,l)*180/Math.PI}function hn(t,n){return Le(n[1],n[0],Ee)+Le(t[1],t[0],Ee)}function dn(t,n){return ye(n[0],n[1],Ee)/ye(t[0],t[1],Ee)}var mn={mousedown:I,mousemove:W,mouseup:P},pn="mousedown",gn="mousemove mouseup";function _e(){this.evEl=pn,this.evWin=gn,this.pressed=!1,A.apply(this,arguments)}M(_e,A,{handler:function(n){var s=mn[n.type];s&I&&n.button===0&&(this.pressed=!0),s&W&&n.which!==1&&(s=P),this.pressed&&(s&P&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[n],changedPointers:[n],pointerType:ze,srcEvent:n}))}});var vn={pointerdown:I,pointermove:W,pointerup:P,pointercancel:b,pointerout:b},Tn={2:ne,3:on,4:ze,5:sn},ht="pointerdown",dt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(ht="MSPointerDown",dt="MSPointerMove MSPointerUp MSPointerCancel");function Ue(){this.evEl=ht,this.evWin=dt,A.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}M(Ue,A,{handler:function(n){var s=this.store,l=!1,c=n.type.toLowerCase().replace("ms",""),d=vn[c],v=Tn[n.pointerType]||n.pointerType,x=v==ne,S=K(s,n.pointerId,"pointerId");d&I&&(n.button===0||x)?S<0&&(s.push(n),S=s.length-1):d&(P|b)&&(l=!0),!(S<0)&&(s[S]=n,this.callback(this.manager,d,{pointers:s,changedPointers:[n],pointerType:v,srcEvent:n}),l&&s.splice(S,1))}});var En={touchstart:I,touchmove:W,touchend:P,touchcancel:b},yn="touchstart",_n="touchstart touchmove touchend touchcancel";function mt(){this.evTarget=yn,this.evWin=_n,this.started=!1,A.apply(this,arguments)}M(mt,A,{handler:function(n){var s=En[n.type];if(s===I&&(this.started=!0),!!this.started){var l=Pn.call(this,n,s);s&(P|b)&&l[0].length-l[1].length===0&&(this.started=!1),this.callback(this.manager,s,{pointers:l[0],changedPointers:l[1],pointerType:ne,srcEvent:n})}}});function Pn(t,n){var s=ge(t.touches),l=ge(t.changedTouches);return n&(P|b)&&(s=it(s.concat(l),"identifier",!0)),[s,l]}var xn={touchstart:I,touchmove:W,touchend:P,touchcancel:b},Sn="touchstart touchmove touchend touchcancel";function Pe(){this.evTarget=Sn,this.targetIds={},A.apply(this,arguments)}M(Pe,A,{handler:function(n){var s=xn[n.type],l=In.call(this,n,s);l&&this.callback(this.manager,s,{pointers:l[0],changedPointers:l[1],pointerType:ne,srcEvent:n})}});function In(t,n){var s=ge(t.touches),l=this.targetIds;if(n&(I|W)&&s.length===1)return l[s[0].identifier]=!0,[s,s];var c,d,v=ge(t.changedTouches),x=[],S=this.target;if(d=s.filter(function(O){return nt(O.target,S)}),n===I)for(c=0;c<d.length;)l[d[c].identifier]=!0,c++;for(c=0;c<v.length;)l[v[c].identifier]&&x.push(v[c]),n&(P|b)&&delete l[v[c].identifier],c++;if(x.length)return[it(d.concat(x),"identifier",!0),x]}var On=2500,pt=25;function He(){A.apply(this,arguments);var t=De(this.handler,this);this.touch=new Pe(this.manager,t),this.mouse=new _e(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}M(He,A,{handler:function(n,s,l){var c=l.pointerType==ne,d=l.pointerType==ze;if(!(d&&l.sourceCapabilities&&l.sourceCapabilities.firesTouchEvents)){if(c)bn.call(this,s,l);else if(d&&Cn.call(this,l))return;this.callback(n,s,l)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function bn(t,n){t&I?(this.primaryTouch=n.changedPointers[0].identifier,gt.call(this,n)):t&(P|b)&&gt.call(this,n)}function gt(t){var n=t.changedPointers[0];if(n.identifier===this.primaryTouch){var s={x:n.clientX,y:n.clientY};this.lastTouches.push(s);var l=this.lastTouches,c=function(){var d=l.indexOf(s);d>-1&&l.splice(d,1)};setTimeout(c,On)}}function Cn(t){for(var n=t.srcEvent.clientX,s=t.srcEvent.clientY,l=0;l<this.lastTouches.length;l++){var c=this.lastTouches[l],d=Math.abs(n-c.x),v=Math.abs(s-c.y);if(d<=pt&&v<=pt)return!0}return!1}var vt=ve(u.style,"touchAction"),Tt=vt!==r,Et="compute",yt="auto",Fe="manipulation",B="none",ae="pan-x",le="pan-y",xe=Mn();function Ye(t,n){this.manager=t,this.set(n)}Ye.prototype={set:function(t){t==Et&&(t=this.compute()),Tt&&this.manager.element.style&&xe[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return T(this.manager.recognizers,function(n){we(n.options.enable,[n])&&(t=t.concat(n.getTouchAction()))}),Nn(t.join(" "))},preventDefaults:function(t){var n=t.srcEvent,s=t.offsetDirection;if(this.manager.session.prevented){n.preventDefault();return}var l=this.actions,c=Z(l,B)&&!xe[B],d=Z(l,le)&&!xe[le],v=Z(l,ae)&&!xe[ae];if(c){var x=t.pointers.length===1,S=t.distance<2,O=t.deltaTime<250;if(x&&S&&O)return}if(!(v&&d)&&(c||d&&s&z||v&&s&q))return this.preventSrc(n)},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function Nn(t){if(Z(t,B))return B;var n=Z(t,ae),s=Z(t,le);return n&&s?B:n||s?n?ae:le:Z(t,Fe)?Fe:yt}function Mn(){if(!Tt)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){t[s]=n?e.CSS.supports("touch-action",s):!0}),t}var Se=1,R=2,Q=4,k=8,F=k,ue=16,L=32;function Y(t){this.options=N({},this.defaults,t||{}),this.id=Jt(),this.manager=null,this.options.enable=tt(this.options.enable,!0),this.state=Se,this.simultaneous={},this.requireFail=[]}Y.prototype={defaults:{},set:function(t){return N(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(_(t,"recognizeWith",this))return this;var n=this.simultaneous;return t=Ie(t,this),n[t.id]||(n[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return _(t,"dropRecognizeWith",this)?this:(t=Ie(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(_(t,"requireFailure",this))return this;var n=this.requireFail;return t=Ie(t,this),K(n,t)===-1&&(n.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(_(t,"dropRequireFailure",this))return this;t=Ie(t,this);var n=K(this.requireFail,t);return n>-1&&this.requireFail.splice(n,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var n=this,s=this.state;function l(c){n.manager.emit(c,t)}s<k&&l(n.options.event+_t(s)),l(n.options.event),t.additionalEvent&&l(t.additionalEvent),s>=k&&l(n.options.event+_t(s))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=L},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(L|Se)))return!1;t++}return!0},recognize:function(t){var n=N({},t);if(!we(this.options.enable,[this,n])){this.reset(),this.state=L;return}this.state&(F|ue|L)&&(this.state=Se),this.state=this.process(n),this.state&(R|Q|k|ue)&&this.tryEmit(n)},process:function(t){},getTouchAction:function(){},reset:function(){}};function _t(t){return t&ue?"cancel":t&k?"end":t&Q?"move":t&R?"start":""}function Pt(t){return t==re?"down":t==se?"up":t==ie?"left":t==oe?"right":""}function Ie(t,n){var s=n.manager;return s?s.get(t):t}function w(){Y.apply(this,arguments)}M(w,Y,{defaults:{pointers:1},attrTest:function(t){var n=this.options.pointers;return n===0||t.pointers.length===n},process:function(t){var n=this.state,s=t.eventType,l=n&(R|Q),c=this.attrTest(t);return l&&(s&b||!c)?n|ue:l||c?s&P?n|k:n&R?n|Q:R:L}});function Oe(){w.apply(this,arguments),this.pX=null,this.pY=null}M(Oe,w,{defaults:{event:"pan",threshold:10,pointers:1,direction:rt},getTouchAction:function(){var t=this.options.direction,n=[];return t&z&&n.push(le),t&q&&n.push(ae),n},directionTest:function(t){var n=this.options,s=!0,l=t.distance,c=t.direction,d=t.deltaX,v=t.deltaY;return c&n.direction||(n.direction&z?(c=d===0?Te:d<0?ie:oe,s=d!=this.pX,l=Math.abs(t.deltaX)):(c=v===0?Te:v<0?se:re,s=v!=this.pY,l=Math.abs(t.deltaY))),t.direction=c,s&&l>n.threshold&&c&n.direction},attrTest:function(t){return w.prototype.attrTest.call(this,t)&&(this.state&R||!(this.state&R)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var n=Pt(t.direction);n&&(t.additionalEvent=this.options.event+n),this._super.emit.call(this,t)}});function Xe(){w.apply(this,arguments)}M(Xe,w,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[B]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&R)},emit:function(t){if(t.scale!==1){var n=t.scale<1?"in":"out";t.additionalEvent=this.options.event+n}this._super.emit.call(this,t)}});function ke(){Y.apply(this,arguments),this._timer=null,this._input=null}M(ke,Y,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[yt]},process:function(t){var n=this.options,s=t.pointers.length===n.pointers,l=t.distance<n.threshold,c=t.deltaTime>n.time;if(this._input=t,!l||!s||t.eventType&(P|b)&&!c)this.reset();else if(t.eventType&I)this.reset(),this._timer=p(function(){this.state=F,this.tryEmit()},n.time,this);else if(t.eventType&P)return F;return L},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===F&&(t&&t.eventType&P?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}});function Ve(){w.apply(this,arguments)}M(Ve,w,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[B]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&R)}});function Ze(){w.apply(this,arguments)}M(Ze,w,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:z|q,pointers:1},getTouchAction:function(){return Oe.prototype.getTouchAction.call(this)},attrTest:function(t){var n=this.options.direction,s;return n&(z|q)?s=t.overallVelocity:n&z?s=t.overallVelocityX:n&q&&(s=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&m(s)>this.options.velocity&&t.eventType&P},emit:function(t){var n=Pt(t.offsetDirection);n&&this.manager.emit(this.options.event+n,t),this.manager.emit(this.options.event,t)}});function be(){Y.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}M(be,Y,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Fe]},process:function(t){var n=this.options,s=t.pointers.length===n.pointers,l=t.distance<n.threshold,c=t.deltaTime<n.time;if(this.reset(),t.eventType&I&&this.count===0)return this.failTimeout();if(l&&c&&s){if(t.eventType!=P)return this.failTimeout();var d=this.pTime?t.timeStamp-this.pTime<n.interval:!0,v=!this.pCenter||ye(this.pCenter,t.center)<n.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,!v||!d?this.count=1:this.count+=1,this._input=t;var x=this.count%n.taps;if(x===0)return this.hasRequireFailures()?(this._timer=p(function(){this.state=F,this.tryEmit()},n.interval,this),R):F}return L},failTimeout:function(){return this._timer=p(function(){this.state=L},this.options.interval,this),L},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==F&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function X(t,n){return n=n||{},n.recognizers=tt(n.recognizers,X.defaults.preset),new We(t,n)}X.VERSION="2.0.7",X.defaults={domEvents:!1,touchAction:Et,enable:!0,inputTarget:null,inputClass:null,preset:[[Ve,{enable:!1}],[Xe,{enable:!1},["rotate"]],[Ze,{direction:z}],[Oe,{direction:z},["swipe"]],[be],[be,{event:"doubletap",taps:2},["tap"]],[ke]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var An=1,xt=2;function We(t,n){this.options=N({},X.defaults,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=an(this),this.touchAction=new Ye(this,this.options.touchAction),St(this,!0),T(this.options.recognizers,function(s){var l=this.add(new s[0](s[1]));s[2]&&l.recognizeWith(s[2]),s[3]&&l.requireFailure(s[3])},this)}We.prototype={set:function(t){return N(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?xt:An},recognize:function(t){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var s,l=this.recognizers,c=n.curRecognizer;(!c||c&&c.state&F)&&(c=n.curRecognizer=null);for(var d=0;d<l.length;)s=l[d],n.stopped!==xt&&(!c||s==c||s.canRecognizeWith(c))?s.recognize(t):s.reset(),!c&&s.state&(R|Q|k)&&(c=n.curRecognizer=s),d++}},get:function(t){if(t instanceof Y)return t;for(var n=this.recognizers,s=0;s<n.length;s++)if(n[s].options.event==t)return n[s];return null},add:function(t){if(_(t,"add",this))return this;var n=this.get(t.options.event);return n&&this.remove(n),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(_(t,"remove",this))return this;if(t=this.get(t),t){var n=this.recognizers,s=K(n,t);s!==-1&&(n.splice(s,1),this.touchAction.update())}return this},on:function(t,n){if(t!==r&&n!==r){var s=this.handlers;return T(pe(t),function(l){s[l]=s[l]||[],s[l].push(n)}),this}},off:function(t,n){if(t!==r){var s=this.handlers;return T(pe(t),function(l){n?s[l]&&s[l].splice(K(s[l],n),1):delete s[l]}),this}},emit:function(t,n){this.options.domEvents&&Rn(t,n);var s=this.handlers[t]&&this.handlers[t].slice();if(!(!s||!s.length)){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var l=0;l<s.length;)s[l](n),l++}},destroy:function(){this.element&&St(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function St(t,n){var s=t.element;if(s.style){var l;T(t.options.cssProps,function(c,d){l=ve(s.style,d),n?(t.oldCssProps[l]=s.style[l],s.style[l]=c):s.style[l]=t.oldCssProps[l]||""}),n||(t.oldCssProps={})}}function Rn(t,n){var s=i.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=n,n.target.dispatchEvent(s)}N(X,{INPUT_START:I,INPUT_MOVE:W,INPUT_END:P,INPUT_CANCEL:b,STATE_POSSIBLE:Se,STATE_BEGAN:R,STATE_CHANGED:Q,STATE_ENDED:k,STATE_RECOGNIZED:F,STATE_CANCELLED:ue,STATE_FAILED:L,DIRECTION_NONE:Te,DIRECTION_LEFT:ie,DIRECTION_RIGHT:oe,DIRECTION_UP:se,DIRECTION_DOWN:re,DIRECTION_HORIZONTAL:z,DIRECTION_VERTICAL:q,DIRECTION_ALL:rt,Manager:We,Input:A,TouchAction:Ye,TouchInput:Pe,MouseInput:_e,PointerEventInput:Ue,TouchMouseInput:He,SingleTouchInput:mt,Recognizer:Y,AttrRecognizer:w,Tap:be,Pan:Oe,Swipe:Ze,Pinch:Xe,Rotate:Ve,Press:ke,on:de,off:me,each:T,merge:te,extend:j,assign:N,inherit:M,bindFn:De,prefixed:ve});var Dn=typeof e<"u"?e:typeof self<"u"?self:{};Dn.Hammer=X,typeof define=="function"&&define.amd?define(function(){return X}):typeof Ae<"u"&&Ae.exports?Ae.exports=X:e[o]=X})(window,document,"Hammer")});var J=zn(bt());var he=e=>e&&e.enabled&&e.modifierKey,Ft=(e,i)=>e&&i[e+"Key"],Je=(e,i)=>e&&!i[e+"Key"];function V(e,i,o){return e===void 0?!0:typeof e=="string"?e.indexOf(i)!==-1:typeof e=="function"?e({chart:o}).indexOf(i)!==-1:!1}function qe(e,i){return typeof e=="function"&&(e=e({chart:i})),typeof e=="string"?{x:e.indexOf("x")!==-1,y:e.indexOf("y")!==-1}:{x:!1,y:!1}}function Ln(e,i){let o;return function(){return clearTimeout(o),o=setTimeout(e,i),i}}function Un({x:e,y:i},o){let r=o.scales,a=Object.keys(r);for(let u=0;u<a.length;u++){let f=r[a[u]];if(i>=f.top&&i<=f.bottom&&e>=f.left&&e<=f.right)return f}return null}function Yt(e,i,o){let{mode:r="xy",scaleMode:a,overScaleMode:u}=e||{},f=Un(i,o),h=qe(r,o),m=qe(a,o);if(u){let p=qe(u,o);for(let _ of["x","y"])p[_]&&(m[_]=h[_],h[_]=!1)}if(f&&m[f.axis])return[f];let g=[];return H(o.scales,function(p){h[p.axis]&&g.push(p)}),g}var Be=new WeakMap;function y(e){let i=Be.get(e);return i||(i={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{},dragging:!1,panning:!1},Be.set(e,i)),i}function Hn(e){Be.delete(e)}function Xt(e,i,o,r){let a=Math.max(0,Math.min(1,(e-i)/o||0)),u=1-a;return{min:r*a,max:r*u}}function kt(e,i){let o=e.isHorizontal()?i.x:i.y;return e.getValueForPixel(o)}function Vt(e,i,o){let r=e.max-e.min,a=r*(i-1),u=kt(e,o);return Xt(u,e.min,r,a)}function Fn(e,i,o){let r=kt(e,o);if(r===void 0)return{min:e.min,max:e.max};let a=Math.log10(e.min),u=Math.log10(e.max),f=Math.log10(r),h=u-a,m=h*(i-1),g=Xt(f,a,h,m);return{min:Math.pow(10,a+g.min),max:Math.pow(10,u-g.max)}}function Yn(e,i){return i&&(i[e.id]||i[e.axis])||{}}function Ct(e,i,o,r,a){let u=o[r];if(u==="original"){let f=e.originalScaleLimits[i.id][r];u=$(f.options,f.scale)}return $(u,a)}function Xn(e,i,o){let r=e.getValueForPixel(i),a=e.getValueForPixel(o);return{min:Math.min(r,a),max:Math.max(r,a)}}function kn(e,{min:i,max:o,minLimit:r,maxLimit:a},u){let f=(e-o+i)/2;i-=f,o+=f;let h=u.min.options??u.min.scale,m=u.max.options??u.max.scale,g=e/1e6;return Ne(i,h,g)&&(i=h),Ne(o,m,g)&&(o=m),i<r?(i=r,o=Math.min(r+e,a)):o>a&&(o=a,i=Math.max(a-e,r)),{min:i,max:o}}function G(e,{min:i,max:o},r,a=!1){let u=y(e.chart),{options:f}=e,h=Yn(e,r),{minRange:m=0}=h,g=Ct(u,e,h,"min",-1/0),p=Ct(u,e,h,"max",1/0);if(a==="pan"&&(i<g||o>p))return!0;let _=e.max-e.min,T=a?Math.max(o-i,m):_;if(a&&T===m&&_<=m)return!0;let D=kn(T,{min:i,max:o,minLimit:g,maxLimit:p},u.originalScaleLimits[e.id]);return f.min=D.min,f.max=D.max,u.updatedScaleLimits[e.id]=D,e.parse(D.min)!==e.min||e.parse(D.max)!==e.max}function Vn(e,i,o,r){let a=Vt(e,i,o),u={min:e.min+a.min,max:e.max-a.max};return G(e,u,r,!0)}function Zn(e,i,o,r){let a=Fn(e,i,o);return G(e,a,r,!0)}function Wn(e,i,o,r){G(e,Xn(e,i,o),r,!0)}var Nt=e=>e===0||isNaN(e)?0:e<0?Math.min(Math.round(e),-1):Math.max(Math.round(e),1);function qn(e){let o=e.getLabels().length-1;e.min>0&&(e.min-=1),e.max<o&&(e.max+=1)}function Bn(e,i,o,r){let a=Vt(e,i,o);e.min===e.max&&i<1&&qn(e);let u={min:e.min+Nt(a.min),max:e.max-Nt(a.max)};return G(e,u,r,!0)}function Gn(e){return e.isHorizontal()?e.width:e.height}function jn(e,i,o){let a=e.getLabels().length-1,{min:u,max:f}=e,h=Math.max(f-u,1),m=Math.round(Gn(e)/Math.max(h,10)),g=Math.round(Math.abs(i/m)),p;return i<-m?(f=Math.min(f+g,a),u=h===1?f:f-h,p=f===a):i>m&&(u=Math.max(0,u-g),f=h===1?u:u+h,p=u===0),G(e,{min:u,max:f},o)||p}var Kn={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function Zt(e,i,o,r=!1){let{min:a,max:u,options:f}=e,h=f.time&&f.time.round,m=Kn[h]||0,g=e.getValueForPixel(e.getPixelForValue(a+m)-i),p=e.getValueForPixel(e.getPixelForValue(u+m)-i);return isNaN(g)||isNaN(p)?!0:G(e,{min:g,max:p},o,r?"pan":!1)}function Mt(e,i,o){return Zt(e,i,o,!0)}var Ge={category:Bn,default:Vn,logarithmic:Zn},je={default:Wn},Ke={category:jn,default:Zt,logarithmic:Mt,timeseries:Mt};function Qn(e,i,o){let{id:r,options:{min:a,max:u}}=e;if(!i[r]||!o[r])return!0;let f=o[r];return f.min!==a||f.max!==u}function At(e,i){H(e,(o,r)=>{i[r]||delete e[r]})}function ee(e,i){let{scales:o}=e,{originalScaleLimits:r,updatedScaleLimits:a}=i;return H(o,function(u){Qn(u,r,a)&&(r[u.id]={min:{scale:u.min,options:u.options.min},max:{scale:u.max,options:u.options.max}})}),At(r,o),At(a,o),r}function Rt(e,i,o,r){let a=Ge[e.type]||Ge.default;E(a,[e,i,o,r])}function Dt(e,i,o,r){let a=je[e.type]||je.default;E(a,[e,i,o,r])}function $n(e){let i=e.chartArea;return{x:(i.left+i.right)/2,y:(i.top+i.bottom)/2}}function et(e,i,o="none"){let{x:r=1,y:a=1,focalPoint:u=$n(e)}=typeof i=="number"?{x:i,y:i}:i,f=y(e),{options:{limits:h,zoom:m}}=f;ee(e,f);let g=r!==1,p=a!==1,_=Yt(m,u,e);H(_||e.scales,function(T){T.isHorizontal()&&g?Rt(T,r,u,h):!T.isHorizontal()&&p&&Rt(T,a,u,h)}),e.update(o),E(m.onZoom,[{chart:e}])}function Wt(e,i,o,r="none"){let a=y(e),{options:{limits:u,zoom:f}}=a,{mode:h="xy"}=f;ee(e,a);let m=V(h,"x",e),g=V(h,"y",e);H(e.scales,function(p){p.isHorizontal()&&m?Dt(p,i.x,o.x,u):!p.isHorizontal()&&g&&Dt(p,i.y,o.y,u)}),e.update(r),E(f.onZoom,[{chart:e}])}function Jn(e,i,o,r="none"){let a=y(e);ee(e,a);let u=e.scales[i];G(u,o,void 0,!0),e.update(r),E(a.options.zoom?.onZoom,[{chart:e}])}function ei(e,i="default"){let o=y(e),r=ee(e,o);H(e.scales,function(a){let u=a.options;r[a.id]?(u.min=r[a.id].min.options,u.max=r[a.id].max.options):(delete u.min,delete u.max),delete o.updatedScaleLimits[a.id]}),e.update(i),E(o.options.zoom.onZoomComplete,[{chart:e}])}function ti(e,i){let o=e.originalScaleLimits[i];if(!o)return;let{min:r,max:a}=o;return $(a.options,a.scale)-$(r.options,r.scale)}function ni(e){let i=y(e),o=1,r=1;return H(e.scales,function(a){let u=ti(i,a.id);if(u){let f=Math.round(u/(a.max-a.min)*100)/100;o=Math.min(o,f),r=Math.max(r,f)}}),o<1?o:r}function wt(e,i,o,r){let{panDelta:a}=r,u=a[e.id]||0;Ce(u)===Ce(i)&&(i+=u);let f=Ke[e.type]||Ke.default;E(f,[e,i,o])?a[e.id]=0:a[e.id]=i}function qt(e,i,o,r="none"){let{x:a=0,y:u=0}=typeof i=="number"?{x:i,y:i}:i,f=y(e),{options:{pan:h,limits:m}}=f,{onPan:g}=h||{};ee(e,f);let p=a!==0,_=u!==0;H(o||e.scales,function(T){T.isHorizontal()&&p?wt(T,a,m,f):!T.isHorizontal()&&_&&wt(T,u,m,f)}),e.update(r),E(g,[{chart:e}])}function Bt(e){let i=y(e);ee(e,i);let o={};for(let r of Object.keys(e.scales)){let{min:a,max:u}=i.originalScaleLimits[r]||{min:{},max:{}};o[r]={min:a.scale,max:u.scale}}return o}function ii(e){let i=y(e),o={};for(let r of Object.keys(e.scales))o[r]=i.updatedScaleLimits[r];return o}function oi(e){let i=Bt(e);for(let o of Object.keys(e.scales)){let{min:r,max:a}=i[o];if(r!==void 0&&e.scales[o].min!==r||a!==void 0&&e.scales[o].max!==a)return!0}return!1}function zt(e){let i=y(e);return i.panning||i.dragging}function C(e,i){let{handlers:o}=y(e),r=o[i];r&&r.target&&(r.target.removeEventListener(i,r),delete o[i])}function fe(e,i,o,r){let{handlers:a,options:u}=y(e),f=a[o];if(f&&f.target===i)return;C(e,o),a[o]=m=>r(e,m,u),a[o].target=i;let h=o==="wheel"?!1:void 0;i.addEventListener(o,a[o],{passive:h})}function si(e,i){let o=y(e);o.dragStart&&(o.dragging=!0,o.dragEnd=i,e.update("none"))}function ri(e,i){let o=y(e);!o.dragStart||i.key!=="Escape"||(C(e,"keydown"),o.dragging=!1,o.dragStart=o.dragEnd=null,e.update("none"))}function Qe(e,i){let o=ce(e,i),r=i.canvas.getBoundingClientRect();return Me(e,r)||(o.x=e.clientX-r.left,o.y=e.clientY-r.top),o}function Gt(e,i,o){let{onZoomStart:r,onZoomRejected:a}=o;if(r){let u=Qe(i,e);if(E(r,[{chart:e,event:i,point:u}])===!1)return E(a,[{chart:e,event:i}]),!1}}function ai(e,i){if(e.legend){let u=ce(i,e);if(Me(u,e.legend))return}let o=y(e),{pan:r,zoom:a={}}=o.options;if(i.button!==0||Ft(he(r),i)||Je(he(a.drag),i))return E(a.onZoomRejected,[{chart:e,event:i}]);Gt(e,i,a)!==!1&&(o.dragStart=i,fe(e,e.canvas.ownerDocument,"mousemove",si),fe(e,window.document,"keydown",ri))}function li(e,i,o){let r=e.x-i.x,a=e.y-i.y,u=Math.abs(r/a);u>o?r=Math.sign(r)*Math.abs(a*o):u<o&&(a=Math.sign(a)*Math.abs(r/o)),e.x=i.x+r,e.y=i.y+a}function Lt(e,i,o,{min:r,max:a,prop:u}){e[r]=Math.max(0,Math.min(i[u],o[u])),e[a]=Math.max(i[u],o[u])}function ui(e,i,o){let r=Qe(i.dragStart,e),a=Qe(i.dragEnd,e);if(o){let u=e.chartArea.width/e.chartArea.height;li(a,r,u)}return{beginPoint:r,endPoint:a}}function jt(e,i,o,r){let a=V(i,"x",e),u=V(i,"y",e),{top:f,left:h,right:m,bottom:g,width:p,height:_}=e.chartArea,T={top:f,left:h,right:m,bottom:g},{beginPoint:D,endPoint:N}=ui(e,o,r&&a&&u);a&&Lt(T,D,N,{min:"left",max:"right",prop:"x"}),u&&Lt(T,D,N,{min:"top",max:"bottom",prop:"y"});let j=T.right-T.left,te=T.bottom-T.top;return Ot(It({},T),{width:j,height:te,zoomX:a&&j?1+(p-j)/p:1,zoomY:u&&te?1+(_-te)/_:1})}function ci(e,i){let o=y(e);if(!o.dragStart)return;C(e,"mousemove");let{mode:r,onZoomComplete:a,drag:{threshold:u=0,maintainAspectRatio:f}}=o.options.zoom,h=jt(e,r,{dragStart:o.dragStart,dragEnd:i},f),m=V(r,"x",e)?h.width:0,g=V(r,"y",e)?h.height:0,p=Math.sqrt(m*m+g*g);if(o.dragStart=o.dragEnd=null,p<=u){o.dragging=!1,e.update("none");return}Wt(e,{x:h.left,y:h.top},{x:h.right,y:h.bottom},"zoom"),o.dragging=!1,o.filterNextClick=!0,E(a,[{chart:e}])}function fi(e,i,o){if(Je(he(o.wheel),i)){E(o.onZoomRejected,[{chart:e,event:i}]);return}if(Gt(e,i,o)!==!1&&(i.cancelable&&i.preventDefault(),i.deltaY!==void 0))return!0}function hi(e,i){let{handlers:{onZoomComplete:o},options:{zoom:r}}=y(e);if(!fi(e,i,r))return;let a=i.target.getBoundingClientRect(),u=r.wheel.speed,f=i.deltaY>=0?2-1/(1-u):1+u,h={x:f,y:f,focalPoint:{x:i.clientX-a.left,y:i.clientY-a.top}};et(e,h),E(o,[{chart:e}])}function di(e,i,o,r){o&&(y(e).handlers[i]=Ln(()=>E(o,[{chart:e}]),r))}function mi(e,i){let o=e.canvas,{wheel:r,drag:a,onZoomComplete:u}=i.zoom;r.enabled?(fe(e,o,"wheel",hi),di(e,"onZoomComplete",u,250)):C(e,"wheel"),a.enabled?(fe(e,o,"mousedown",ai),fe(e,o.ownerDocument,"mouseup",ci)):(C(e,"mousedown"),C(e,"mousemove"),C(e,"mouseup"),C(e,"keydown"))}function pi(e){C(e,"mousedown"),C(e,"mousemove"),C(e,"mouseup"),C(e,"wheel"),C(e,"click"),C(e,"keydown")}function gi(e,i){return function(o,r){let{pan:a,zoom:u={}}=i.options;if(!a||!a.enabled)return!1;let f=r&&r.srcEvent;return f&&!i.panning&&r.pointerType==="mouse"&&(Je(he(a),f)||Ft(he(u.drag),f))?(E(a.onPanRejected,[{chart:e,event:r}]),!1):!0}}function vi(e,i){let o=Math.abs(e.clientX-i.clientX),r=Math.abs(e.clientY-i.clientY),a=o/r,u,f;return a>.3&&a<1.7?u=f=!0:o>r?u=!0:f=!0,{x:u,y:f}}function Kt(e,i,o){if(i.scale){let{center:r,pointers:a}=o,u=1/i.scale*o.scale,f=o.target.getBoundingClientRect(),h=vi(a[0],a[1]),m=i.options.zoom.mode,g={x:h.x&&V(m,"x",e)?u:1,y:h.y&&V(m,"y",e)?u:1,focalPoint:{x:r.x-f.left,y:r.y-f.top}};et(e,g),i.scale=o.scale}}function Ti(e,i,o){if(i.options.zoom.pinch.enabled){let r=ce(o,e);E(i.options.zoom.onZoomStart,[{chart:e,event:o,point:r}]),i.scale=1}}function Ei(e,i,o){i.scale&&(Kt(e,i,o),i.scale=null,E(i.options.zoom.onZoomComplete,[{chart:e}]))}function Qt(e,i,o){let r=i.delta;r&&(i.panning=!0,qt(e,{x:o.deltaX-r.x,y:o.deltaY-r.y},i.panScales),i.delta={x:o.deltaX,y:o.deltaY})}function yi(e,i,o){let{enabled:r,onPanStart:a,onPanRejected:u}=i.options.pan;if(!r)return;let f=o.target.getBoundingClientRect(),h={x:o.center.x-f.left,y:o.center.y-f.top};if(E(a,[{chart:e,event:o,point:h}])===!1)return E(u,[{chart:e,event:o}]);i.panScales=Yt(i.options.pan,h,e),i.delta={x:0,y:0},Qt(e,i,o)}function _i(e,i){i.delta=null,i.panning&&(i.panning=!1,i.filterNextClick=!0,E(i.options.pan.onPanComplete,[{chart:e}]))}var $e=new WeakMap;function Ut(e,i){let o=y(e),r=e.canvas,{pan:a,zoom:u}=i,f=new J.default.Manager(r);u&&u.pinch.enabled&&(f.add(new J.default.Pinch),f.on("pinchstart",h=>Ti(e,o,h)),f.on("pinch",h=>Kt(e,o,h)),f.on("pinchend",h=>Ei(e,o,h))),a&&a.enabled&&(f.add(new J.default.Pan({threshold:a.threshold,enable:gi(e,o)})),f.on("panstart",h=>yi(e,o,h)),f.on("panmove",h=>Qt(e,o,h)),f.on("panend",()=>_i(e,o))),$e.set(e,f)}function Ht(e){let i=$e.get(e);i&&(i.remove("pinchstart"),i.remove("pinch"),i.remove("pinchend"),i.remove("panstart"),i.remove("pan"),i.remove("panend"),i.destroy(),$e.delete(e))}function Pi(e,i){let{pan:o,zoom:r}=e,{pan:a,zoom:u}=i;return r?.zoom?.pinch?.enabled!==u?.zoom?.pinch?.enabled||o?.enabled!==a?.enabled||o?.threshold!==a?.threshold}var xi="2.1.0";function Re(e,i,o){let r=o.zoom.drag,{dragStart:a,dragEnd:u}=y(e);if(r.drawTime!==i||!u)return;let{left:f,top:h,width:m,height:g}=jt(e,o.zoom.mode,{dragStart:a,dragEnd:u},r.maintainAspectRatio),p=e.ctx;p.save(),p.beginPath(),p.fillStyle=r.backgroundColor||"rgba(225,225,225,0.3)",p.fillRect(f,h,m,g),r.borderWidth>0&&(p.lineWidth=r.borderWidth,p.strokeStyle=r.borderColor||"rgba(225,225,225)",p.strokeRect(f,h,m,g)),p.restore()}var Us={id:"zoom",version:xi,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(e,i,o){let r=y(e);r.options=o,Object.prototype.hasOwnProperty.call(o.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(o.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(o.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),J.default&&Ut(e,o),e.pan=(a,u,f)=>qt(e,a,u,f),e.zoom=(a,u)=>et(e,a,u),e.zoomRect=(a,u,f)=>Wt(e,a,u,f),e.zoomScale=(a,u,f)=>Jn(e,a,u,f),e.resetZoom=a=>ei(e,a),e.getZoomLevel=()=>ni(e),e.getInitialScaleBounds=()=>Bt(e),e.getZoomedScaleBounds=()=>ii(e),e.isZoomedOrPanned=()=>oi(e),e.isZoomingOrPanning=()=>zt(e)},beforeEvent(e,{event:i}){if(zt(e))return!1;if(i.type==="click"||i.type==="mouseup"){let o=y(e);if(o.filterNextClick)return o.filterNextClick=!1,!1}},beforeUpdate:function(e,i,o){let r=y(e),a=r.options;r.options=o,Pi(a,o)&&(Ht(e),Ut(e,o)),mi(e,o)},beforeDatasetsDraw(e,i,o){Re(e,"beforeDatasetsDraw",o)},afterDatasetsDraw(e,i,o){Re(e,"afterDatasetsDraw",o)},beforeDraw(e,i,o){Re(e,"beforeDraw",o)},afterDraw(e,i,o){Re(e,"afterDraw",o)},stop:function(e){pi(e),J.default&&Ht(e),Hn(e)},panFunctions:Ke,zoomFunctions:Ge,zoomRectFunctions:je};export{Us as default,qt as pan,ei as resetZoom,et as zoom,Wt as zoomRect,Jn as zoomScale};
